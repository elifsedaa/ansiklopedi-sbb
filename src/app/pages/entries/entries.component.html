<div class="entries-page">
  <!-- Breadcrumb -->
  <div class="breadcrumb-container">
    <div class="container">
      <p-breadcrumb
        [model]="breadcrumbItems"
        [home]="home"
        styleClass="custom-breadcrumb">
      </p-breadcrumb>
    </div>
  </div>

<!--  &lt;!&ndash; Page Header &ndash;&gt;-->
<!--  <div class="page-header">-->
<!--    <div class="container">-->
<!--      <h1 class="page-title">Maddeler</h1>-->
<!--      <p class="page-subtitle">-->
<!--        Sakarya Ansiklopedisi'ndeki tüm maddeleri alfabetik sıraya göre keşfedin.-->
<!--        Aradığınız konuya kolayca ulaşın.-->
<!--      </p>-->
<!--    </div>-->
<!--  </div>-->

  <!-- Search Section -->
  <div class="search-section">
    <div class="container">
      <div class="search-wrapper">
        <div class="search-input-container">
          <i class="pi pi-search search-icon"></i>
          <input
            type="text"
            [(ngModel)]="searchTerm"
            placeholder="Madde ara..."
            class="search-input"
            (input)="onSearchInput()"
            (keyup.enter)="performSearch()">
        </div>
        <button
          *ngIf="searchTerm"
          class="clear-search-btn"
          (click)="clearSearch()">
          <i class="pi pi-times"></i>
          Temizle
        </button>
      </div>
    </div>
  </div>

  <!-- Alphabet Filter -->
  <div class="alphabet-filter">
    <div class="container">
      <div class="alphabet-grid">
        <button
          *ngFor="let letter of alphabet"
          class="alphabet-btn"
          [class.active]="selectedLetter === letter"
          [class.has-entries]="getEntryCount(letter) > 0"
          (click)="filterByLetter(letter)"
          [title]="letter === 'Tümü' ? 'Tüm maddeler' : letter === '#' ? 'Sayılar ve semboller' : letter + ' harfi ile başlayan maddeler'">
          {{ letter }}
          <span class="count" *ngIf="getEntryCount(letter) > 0">({{ getEntryCount(letter) }})</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Results Info -->
  <div class="results-info" *ngIf="!loading">
    <div class="container">
      <h2 class="results-title">
        <span *ngIf="searchTerm; else letterTemplate">
          "{{ searchTerm }}" için {{ totalEntries }} madde bulundu
        </span>
        <ng-template #letterTemplate>
          <span *ngIf="selectedLetter === 'Tümü'; else specificLetter">
            Tüm Maddeler - {{ totalEntries }} Madde
          </span>
          <ng-template #specificLetter>
            {{ selectedLetter }} Harfi - {{ totalEntries }} Madde
          </ng-template>
        </ng-template>
      </h2>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-section" *ngIf="loading">
    <div class="container">
      <div class="entries-grid">
        <div class="entry-skeleton" *ngFor="let item of [1,2,3,4,5,6,7,8,9,10,11,12]">
          <div class="skeleton-card">
            <div class="skeleton-image"></div>
            <div class="skeleton-content">
              <div class="skeleton-line skeleton-title"></div>
              <div class="skeleton-line skeleton-text"></div>
              <div class="skeleton-line skeleton-text short"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Entries Section -->
  <div class="entries-section" *ngIf="!loading">
    <div class="container">
      <div class="entries-grid" *ngIf="totalEntries > 0">
        <div
          class="entry-card"
          *ngFor="let entry of getPaginatedEntries()"
          (click)="navigateToEntry(entry)">

          <div class="entry-image">
            <img
              [src]="getEntryImage(entry)"
              (error)="onImageError($event)"
              [alt]="entry.title">
          </div>


          <div class="entry-info">
            <h4 class="entry-title">{{ entry.title }}</h4>
            <p class="entry-summary">{{ entry.summary }}</p>

            <div class="entry-meta">
              <div class="author-info">
                <i class="pi pi-user"></i>
                <span>{{ getAuthorsText(entry) }}</span>
              </div>

<!--              <div class="entry-stats">-->
<!--                <span class="stat-item" *ngIf="entry.stats?.viewCount">-->
<!--                  <i class="pi pi-eye"></i>-->
<!--                  {{ entry.stats.viewCount }}-->
<!--                </span>-->
<!--                <span class="stat-item" *ngIf="entry.stats?.likeCount">-->
<!--                  <i class="pi pi-heart"></i>-->
<!--                  {{ entry.stats.likeCount }}-->
<!--                </span>-->
<!--              </div>-->
            </div>
          </div>

          <div class="entry-overlay">
            <i class="pi pi-eye"></i>
            <span>Detayları Görüntüle</span>
          </div>
        </div>
      </div>

      <!-- No Results Message -->
      <div class="no-results" *ngIf="totalEntries === 0">
        <i class="pi pi-info-circle"></i>
        <h3>Sonuç Bulunamadı</h3>
        <p *ngIf="searchTerm; else noLetterResults">
          "{{ searchTerm }}" araması için sonuç bulunamadı.
        </p>
        <ng-template #noLetterResults>
          <p>{{ selectedLetter === 'Tümü' ? 'Hiç madde bulunamadı.' : selectedLetter + ' harfi ile başlayan madde bulunamadı.' }}</p>
        </ng-template>

        <div class="no-results-actions">
          <button class="btn-primary" (click)="clearSearch()" *ngIf="searchTerm">
            <i class="pi pi-refresh"></i>
            Aramayı Temizle
          </button>
          <button class="btn-secondary" (click)="filterByLetter('Tümü')" *ngIf="selectedLetter !== 'Tümü'">
            <i class="pi pi-list"></i>
            Tüm Maddeleri Gör
          </button>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination-wrapper" *ngIf="totalEntries > entriesPerPage">
        <div class="pagination">
          <!-- Previous Button -->
          <button
            class="page-btn"
            [class.disabled]="currentPage === 1"
            (click)="changePage(currentPage - 1)"
            [disabled]="currentPage === 1">
            <i class="pi pi-angle-left"></i>
          </button>

          <!-- Page Numbers -->
          <button
            *ngFor="let page of getPageNumbers()"
            class="page-btn"
            [class.active]="currentPage === page"
            (click)="changePage(page)">
            {{ page }}
          </button>

          <!-- Next Button -->
          <button
            class="page-btn"
            [class.disabled]="currentPage === getTotalPages()"
            (click)="changePage(currentPage + 1)"
            [disabled]="currentPage === getTotalPages()">
            <i class="pi pi-angle-right"></i>
          </button>
        </div>

        <div class="pagination-info">
          {{ (currentPage - 1) * entriesPerPage + 1 }}-{{ Math.min(currentPage * entriesPerPage, totalEntries) }} arası,
          toplam {{ totalEntries }} madde
        </div>
      </div>
    </div>
  </div>
</div>
